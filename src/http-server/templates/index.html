{{define "Index"}}
<!DOCTYPE html>
<html lang="en">
  {{template "_head"}}
<body>
  {{template "_menu"}}

  <div class="container-fluid">
    <section class="card">
      <div>
        <table class="table table-striped table-hover mb-0" aria-describedby="List of products">
          <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Price</th>
              <th>Amount</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {{range .}}
            <tr>
              <td>{{.Name}}</td>
              <td>{{.Description}}</td>
              <td>$ {{.Price}}</td>
              <td>{{.Amount}}</td>
              <td><button onclick="onDelete('{{.Id}}')" class="btn btn-danger">Remove</button></td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </div>
      <div class="card-footer">
        <a href="/new" class="btn btn-primary mb-2">New product</a>
      </div>
    </section>
  </div>

  <script>
    function onDelete(id) {
        const remove = confirm("Are you sure you want to remove this product?")

        if (remove) {
          console.log(id)
            window.location = "/delete?id=" + id
        }
    }
  </script>
</body>
</html>
{{end}}